<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="calendar.pageTitle">Calendario</title>
  <link rel="icon" type="image/png" href="../media/logo.png" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css"
  />
  <link rel="stylesheet" href="../utils/css/style.css" />
  <link rel="stylesheet" href="../utils/css/kalender.css" />
</head>
<body class="calendar-theme">
  <header class="calendar-header" data-calendar-header>
    <div class="calendar-header__inner">
      <div class="calendar-header__row">
        <a class="calendar-header__brand" href="index.html">
          <img src="../media/logo.png" alt="" aria-hidden="true" width="40" height="40" />
          <div class="calendar-header__brand-copy">
            <span class="calendar-header__eyebrow" data-i18n="calendar.header.eyebrow">Area di pianificazione</span>
            <span class="calendar-header__name" data-i18n="common.appName">Homework Manager</span>
          </div>
        </a>
        <span class="calendar-header__status" data-i18n="calendar.header.status">Sincronizzato in tempo reale</span>
        <button
          class="calendar-header__menu-toggle"
          type="button"
          data-calendar-menu-toggle
          aria-expanded="false"
          aria-controls="calendar-header-nav"
          data-i18n-attr="aria-label:calendar.header.menuLabel"
        >
          <span class="visually-hidden" data-i18n="calendar.header.menuLabel">Navigazione calendario</span>
          <span aria-hidden="true"></span>
        </button>
      </div>
    </div>
    <nav
      class="calendar-header__nav"
      id="calendar-header-nav"
      aria-label="Navigazione calendario"
      data-i18n-attr="aria-label:calendar.header.menuLabel"
      data-calendar-menu
    >
      <a class="calendar-header__nav-link" href="index.html" data-route="index.html" data-i18n="common.nav.home">Home</a>
      <a class="calendar-header__nav-link" href="kalender.html" data-route="kalender.html" data-i18n="common.nav.calendar"
        >Calendario</a
      >
      <a class="calendar-header__nav-link" href="upcoming.html" data-route="upcoming.html" data-i18n="common.nav.upcoming"
        >In arrivo</a
      >
      <a
        class="calendar-header__nav-link"
        href="stundenplan.html"
        data-route="stundenplan.html"
        data-i18n="common.nav.currentSubject"
        >Materia attuale</a
      >
      <a class="calendar-header__nav-link" href="notenrechner.html" data-route="notenrechner.html" data-i18n="common.nav.grades"
        >Calcolatore di voti</a
      >
    </nav>
  </header>
  <main class="calendar-page" id="main">
    <section class="calendar-intro">
      <div class="calendar-intro__heading">
        <p class="calendar-header__label" data-i18n="calendar.header.badge">Hub calendario</p>
        <h1 class="calendar-header__title" data-i18n="calendar.heading">ðŸ“… Calendario</h1>
        <p class="calendar-header__subtitle" data-i18n="calendar.header.subtitle">
          Panoramica in tempo reale di compiti, verifiche ed eventi.
        </p>
      </div>
    </section>
    <section class="calendar-shell" aria-live="polite">
      <div class="calendar-weekstrip" data-week-strip>
        <span class="calendar-weekstrip__label" data-i18n="calendar.weekStrip.label">Settimane</span>
        <div class="calendar-weekstrip__list" data-week-strip-list role="listbox"></div>
      </div>
      <div class="calendar-controls" data-calendar-controls>
        <div
          class="calendar-month-nav"
          role="toolbar"
          aria-label="Navigazione mesi"
          data-i18n-attr="aria-label:calendar.monthNav.label"
        >
          <button
            type="button"
            class="calendar-month-nav__button calendar-month-nav__button--prev"
            data-calendar-nav="prev"
            aria-label="Mese precedente"
            data-i18n-attr="aria-label:calendar.monthNav.previous"
          >
            <span aria-hidden="true">â—€</span>
            <span class="visually-hidden" data-i18n="calendar.monthNav.previous">Mese precedente</span>
          </button>
          <div
            class="calendar-view-switch"
            role="group"
            aria-label="Seleziona la vista del calendario"
            data-i18n-attr="aria-label:calendar.viewSwitch.label"
          >
            <button
              type="button"
              class="calendar-view-switch__button"
              data-calendar-view="dayGridMonth"
              aria-pressed="false"
              data-i18n="calendar.views.month"
            >
              Mese
            </button>
            <button
              type="button"
              class="calendar-view-switch__button"
              data-calendar-view="timeGridWeek"
              aria-pressed="false"
              data-i18n="calendar.views.week"
            >
              Settimana
            </button>
            <button
              type="button"
              class="calendar-view-switch__button"
              data-calendar-view="timeGridDay"
              aria-pressed="false"
              data-i18n="calendar.views.day"
            >
              Giorno
            </button>
          </div>
          <button
            type="button"
            class="calendar-month-nav__button calendar-month-nav__button--next"
            data-calendar-nav="next"
            aria-label="Mese successivo"
            data-i18n-attr="aria-label:calendar.monthNav.next"
          >
            <span class="visually-hidden" data-i18n="calendar.monthNav.next">Mese successivo</span>
            <span aria-hidden="true">â–¶</span>
          </button>
          <button
            type="button"
            class="calendar-month-nav__button calendar-month-nav__button--today"
            data-calendar-nav="today"
            aria-label="Vai a oggi"
            data-i18n-attr="aria-label:calendar.monthNav.today"
          >
            <span data-i18n="calendar.monthNav.today">Oggi</span>
          </button>
        </div>
        <div class="calendar-class-selector" data-class-selector hidden>
          <label for="calendar-class-select" data-i18n="calendar.classSelector.label">Classe</label>
          <select id="calendar-class-select" data-class-select>
            <option value="" disabled selected data-i18n="calendar.classSelector.placeholder">Seleziona una classe</option>
          </select>
        </div>
        <span
          class="calendar-month-nav__label"
          data-calendar-month-label
          data-i18n="calendar.monthNav.current"
        >
          Mese corrente
        </span>
      </div>
      <div class="calendar-shell__legend" role="presentation">
        <div class="calendar-legend" role="list">
          <span class="calendar-legend__item" data-type="hausaufgabe" role="listitem">
            <span class="calendar-legend__dot" aria-hidden="true"></span>
            <span data-i18n="calendar.legend.homework">Compito</span>
          </span>
          <span class="calendar-legend__item" data-type="pruefung" role="listitem">
            <span class="calendar-legend__dot" aria-hidden="true"></span>
            <span data-i18n="calendar.legend.exam">Verifica</span>
          </span>
          <span class="calendar-legend__item" data-type="event" role="listitem">
            <span class="calendar-legend__dot" aria-hidden="true"></span>
            <span data-i18n="calendar.legend.event">Evento</span>
          </span>
          <span class="calendar-legend__item" data-type="ferien" role="listitem">
            <span class="calendar-legend__dot" aria-hidden="true"></span>
            <span data-i18n="calendar.legend.holiday">Vacanze e festivitÃ </span>
          </span>
        </div>
      </div>
      <div
        id="calendar"
        data-state="loading"
        role="status"
        aria-live="polite"
        aria-busy="true"
        data-i18n="calendar.status.loading"
      >
        Caricamento del calendarioÂ â€¦
      </div>
    </section>
  </main>

  <footer
    class="calendar-action-bar"
    data-i18n-attr="aria-label:calendar.actionBar.label"
    aria-label="Azioni del calendario"
  >
    <div class="calendar-action-bar__inner">
      <button
        type="button"
        class="calendar-cta calendar-cta--primary"
        data-action="create"
        data-i18n-attr="aria-label:calendar.actions.create.tooltip,title:calendar.actions.create.tooltip,data-tooltip:calendar.actions.create.tooltip"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 5v14"></path>
          <path d="M5 12h14"></path>
        </svg>
        <span class="calendar-cta__label" data-i18n="calendar.actions.create.label">Nuova voce</span>
      </button>
      <button
        type="button"
        class="calendar-cta calendar-cta--secondary"
        data-action="export"
        data-i18n-attr="aria-label:calendar.actions.export.tooltip,title:calendar.actions.export.tooltip,data-tooltip:calendar.actions.export.tooltip"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <path d="M7 10l5 5 5-5"></path>
          <path d="M12 4v11"></path>
        </svg>
        <span class="calendar-cta__label" data-i18n="calendar.actions.export.label">Esporta</span>
      </button>
      <button
        type="button"
        class="calendar-cta calendar-cta--secondary"
        data-action="back"
        data-i18n-attr="aria-label:calendar.actions.back.tooltip,title:calendar.actions.back.tooltip,data-tooltip:calendar.actions.back.tooltip"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M15 18l-6-6 6-6"></path>
          <path d="M21 12H9"></path>
        </svg>
        <span class="calendar-cta__label" data-i18n="calendar.actions.back.label">Panoramica</span>
      </button>
    </div>
  </footer>

  <div id="fc-modal-overlay" class="hm-modal-overlay" onclick="closeModal()">
    <div class="hm-modal" role="dialog" aria-modal="true" tabindex="-1" onclick="event.stopPropagation()">
      <header class="hm-modal__header">
        <button
          type="button"
          class="hm-modal__close"
          onclick="closeModal()"
          aria-label="Chiudi"
          data-i18n-attr="aria-label:calendar.modal.buttons.close"
        >
          <span class="visually-hidden" data-i18n="calendar.modal.buttons.close">Chiudi</span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M18 6 6 18"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
        <div class="hm-modal__title-wrapper">
          <h2 id="fc-modal-title" class="hm-modal__title" data-i18n="calendar.modal.viewTitle">Voce di calendario</h2>
        </div>
      </header>

      <div id="fc-view-mode" class="hm-modal__section">
        <div class="hm-modal__body">
          <div class="hm-modal__field">
            <label data-i18n="calendar.modal.labels.type">Tipo</label>
            <span id="fc-modal-type"></span>
          </div>
          <div class="hm-modal__field">
            <label data-view-label="subject" data-i18n="calendar.modal.labels.subject">Materia</label>
            <span id="fc-modal-subject"></span>
          </div>
          <div class="hm-modal__field">
            <label data-i18n="calendar.modal.labels.date">Data</label>
            <span id="fc-modal-date"></span>
          </div>
        </div>
        <div id="fc-modal-desc" class="hm-modal__desc" data-i18n-html="calendar.modal.noDescription"></div>
        <div class="hm-modal__footer">
          <button
            type="button"
            class="hm-btn hm-btn--secondary"
            onclick="closeModal()"
            data-i18n="calendar.modal.buttons.close"
          >
            Chiudi
          </button>
        </div>
      </div>

      <form id="fc-edit-form" class="hm-modal__form is-hidden" onsubmit="saveEdit(event)" novalidate>
        <input type="hidden" id="fc-entry-id" />

        <div class="hm-modal__body">
          <div class="hm-modal__field" data-field="type">
            <label for="fc-edit-type" data-i18n="calendar.modal.labels.type">Tipo</label>
            <select
              id="fc-edit-type"
              class="hm-select hm-select--type"
              name="typ"
              required
              data-hm-modal-initial-focus
            >
              <option value="hausaufgabe" data-i18n="calendar.legend.homework">Compito</option>
              <option value="pruefung" data-i18n="calendar.legend.exam">Verifica</option>
              <option value="event" data-i18n="calendar.legend.event">Evento</option>
              <option value="ferien" data-i18n="calendar.legend.holiday">Vacanze e festivitÃ </option>
            </select>
          </div>

          <div class="hm-modal__field is-hidden" data-field="event-title">
            <label for="fc-edit-event-title" data-i18n="calendar.modal.labels.eventTitle">Titolo evento</label>
            <input
              type="text"
              id="fc-edit-event-title"
              name="event-titel"
              placeholder="Nome dell'evento"
              data-i18n-attr="placeholder:calendar.modal.placeholders.eventTitle"
            />
          </div>

          <div class="hm-modal__field" data-field="subject">
            <label for="fc-edit-subject" data-i18n="calendar.modal.labels.subject">Materia</label>
            <select id="fc-edit-subject" class="hm-select hm-select--subject" name="fach">
              <option value="" data-i18n="calendar.modal.placeholders.subject">â€“ seleziona â€“</option>
              <option>MA</option>
              <option>DE</option>
              <option>EN</option>
              <option>PS</option>
              <option>SPM-PS</option>
              <option>SPM-MA</option>
              <option>SPM-ES</option>
              <option>SP</option>
              <option>WR</option>
              <option>GS</option>
              <option>GG</option>
              <option>IN</option>
              <option>IT</option>
              <option>FR</option>
              <option>BG</option>
              <option>MU</option>
              <option>BI</option>
              <option>Sport</option>
              <option>CH</option>
              <option>PH</option>
              <option>SMU</option>
            </select>
          </div>

          <div class="hm-modal__field" data-field="date">
            <label for="fc-edit-date" data-i18n="calendar.modal.labels.date">Data</label>
            <input type="date" id="fc-edit-date" name="datum" required />
          </div>

          <div class="hm-modal__field is-hidden" data-field="end-date">
            <label for="fc-edit-end-date" data-i18n="calendar.modal.labels.endDate">Data di fine</label>
            <input type="date" id="fc-edit-end-date" name="enddatum" />
          </div>

          <div class="hm-modal__field" data-field="start">
            <label for="fc-edit-start" data-i18n="calendar.modal.labels.start">Ora di inizio</label>
            <input type="time" id="fc-edit-start" name="startzeit" />
          </div>

          <div class="hm-modal__field" data-field="end">
            <label for="fc-edit-end" data-i18n="calendar.modal.labels.end">Ora di fine</label>
            <input type="time" id="fc-edit-end" name="endzeit" />
          </div>

          <div class="hm-modal__field" data-field="description">
            <label for="fc-edit-desc" data-i18n="calendar.modal.labels.descriptionOptional">Descrizione (facoltativa)</label>
            <textarea
              id="fc-edit-desc"
              name="beschreibung"
              rows="4"
              placeholder="Dettagli"
              data-i18n-attr="placeholder:calendar.modal.placeholders.description"
            ></textarea>
          </div>
        </div>

        <div class="hm-modal__footer">
          <button
            type="button"
            class="hm-btn hm-btn--secondary"
            data-role="cancel"
            data-i18n="calendar.modal.buttons.cancel"
          >
            Annulla
          </button>
          <button
            type="submit"
            class="hm-btn hm-btn--primary"
            data-role="submit"
            data-i18n="calendar.modal.buttons.save"
          >
            Salva
          </button>
          <button
            type="button"
            class="hm-btn hm-btn--danger"
            data-role="delete"
            onclick="openDeleteConfirmModal()"
            data-i18n="calendar.modal.buttons.delete"
          >
            Elimina
          </button>
        </div>
      </form>
    </div>
  </div>

  <div id="entry-modal-overlay" class="hm-modal-overlay" onclick="closeEntryModal()">
    <div class="hm-modal" role="dialog" aria-modal="true" tabindex="-1" onclick="event.stopPropagation()">
      <header class="hm-modal__header">
        <button
          type="button"
          class="hm-modal__close"
          onclick="closeEntryModal()"
          aria-label="Chiudi"
          data-i18n-attr="aria-label:calendar.modal.buttons.close"
        >
          <span class="visually-hidden" data-i18n="calendar.modal.buttons.close">Chiudi</span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M18 6 6 18"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
        <div class="hm-modal__title-wrapper">
          <h2 class="hm-modal__title" data-i18n="calendar.modal.createTitle">Crea una voce</h2>
        </div>
      </header>

      <form id="entry-form" class="hm-modal__form" onsubmit="saveEntry(event)" novalidate>
        <div class="hm-modal__body">
          <div class="hm-modal__field" data-field="type">
            <label for="typ" data-i18n="calendar.modal.labels.type">Tipo</label>
            <select
              id="typ"
              class="hm-select hm-select--type"
              name="typ"
              required
              data-hm-modal-initial-focus
            >
              <option value="hausaufgabe" data-i18n="calendar.legend.homework">Compito</option>
              <option value="pruefung" data-i18n="calendar.legend.exam">Verifica</option>
              <option value="event" data-i18n="calendar.legend.event">Evento</option>
              <option value="ferien" data-i18n="calendar.legend.holiday">Vacanze e festivitÃ </option>
            </select>
          </div>

          <div class="hm-modal__field is-hidden" data-field="event-title">
            <label for="event-titel" data-i18n="calendar.modal.labels.eventTitle">Titolo evento</label>
            <input
              type="text"
              id="event-titel"
              name="event-titel"
              placeholder="Nome dell'evento"
              data-i18n-attr="placeholder:calendar.modal.placeholders.eventTitle"
            />
            <p class="field-hint" data-i18n="calendar.modal.hints.eventTitle">Obbligatorio per gli eventi.</p>
          </div>

          <div class="hm-modal__field" data-field="subject">
            <label for="fach" data-i18n="calendar.modal.labels.subject">Materia</label>
            <select id="fach" class="hm-select hm-select--subject" name="fach">
              <option value="" data-i18n="calendar.modal.placeholders.subject">â€“ seleziona â€“</option>
              <option>MA</option>
              <option>DE</option>
              <option>EN</option>
              <option>PS</option>
              <option>SPM-PS</option>
              <option>SPM-MA</option>
              <option>SPM-ES</option>
              <option>SP</option>
              <option>WR</option>
              <option>GS</option>
              <option>GG</option>
              <option>IN</option>
              <option>IT</option>
              <option>FR</option>
              <option>BG</option>
              <option>MU</option>
              <option>BI</option>
              <option>Sport</option>
              <option>CH</option>
              <option>PH</option>
              <option>SMU</option>
            </select>
          </div>

          <div
            class="hm-modal__field"
            data-field="classes"
            data-entry-class-field
            data-entry-class-hint="Tieni premuto Ctrl (Windows) o Cmd (Mac) per selezionare piÃ¹ classi."
            hidden
          >
            <label for="entry-class-ids">Classi</label>
            <select id="entry-class-ids" class="hm-select hm-select--classes" data-entry-class-select>
              <option value="" disabled>Caricamento classiâ€¦</option>
            </select>
          </div>

          <div class="hm-modal__field" data-field="date">
            <label for="datum" data-i18n="calendar.modal.labels.date">Data</label>
            <input type="date" id="datum" name="datum" required />
          </div>

          <div class="hm-modal__field is-hidden" data-field="end-date">
            <label for="enddatum" data-i18n="calendar.modal.labels.endDate">Data di fine</label>
            <input type="date" id="enddatum" name="enddatum" />
          </div>

          <div class="hm-modal__field" data-field="start">
            <label for="startzeit" data-i18n="calendar.modal.labels.start">Ora di inizio</label>
            <input type="time" id="startzeit" name="startzeit" required />
          </div>

          <div class="hm-modal__field" data-field="end">
            <label for="endzeit" data-i18n="calendar.modal.labels.end">Ora di fine</label>
            <input type="time" id="endzeit" name="endzeit" />
          </div>

          <div class="hm-modal__field" data-field="description">
            <label for="beschreibung" data-i18n="calendar.modal.labels.descriptionOptional">Descrizione (facoltativa)</label>
            <textarea
              id="beschreibung"
              name="beschreibung"
              rows="3"
              placeholder="Descrizione breve"
              data-i18n-attr="placeholder:calendar.modal.placeholders.descriptionShort"
            ></textarea>
          </div>
        </div>

        <div class="hm-modal__footer">
          <button
            type="button"
            class="hm-btn hm-btn--secondary"
            data-role="cancel"
            onclick="closeEntryModal()"
            data-i18n="calendar.modal.buttons.cancel"
          >
            Annulla
          </button>
          <button
            type="submit"
            id="saveButton"
            class="hm-btn hm-btn--primary"
            data-role="submit"
            data-i18n="calendar.modal.buttons.add"
          >
            Aggiungi
          </button>
        </div>
      </form>
    </div>
  </div>

  <div
    id="calendar-delete-confirm-overlay"
    class="hm-modal-overlay"
    aria-hidden="true"
    onclick="closeDeleteConfirmModal()"
  >
    <div
      class="hm-modal hm-modal--compact"
      role="dialog"
      aria-modal="true"
      aria-labelledby="calendar-delete-confirm-title"
      onclick="event.stopPropagation()"
    >
      <header class="hm-modal__header">
        <button
          type="button"
          class="hm-modal__close"
          onclick="closeDeleteConfirmModal()"
          aria-label="Chiudi"
          data-i18n-attr="aria-label:calendar.modal.buttons.close"
        >
          <span class="visually-hidden" data-i18n="calendar.modal.buttons.close">Chiudi</span>
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M18 6 6 18"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
        <div class="hm-modal__title-wrapper">
          <h2
            id="calendar-delete-confirm-title"
            class="hm-modal__title"
            data-i18n="calendar.modal.deleteConfirm.title"
          >
            Eliminare la voce?
          </h2>
        </div>
      </header>

      <div class="hm-modal__body">
        <p data-i18n="calendar.modal.deleteConfirm.message">
          Vuoi davvero eliminare questa voce? Questa azione non puÃ² essere annullata.
        </p>
      </div>

      <div class="hm-modal__footer">
        <button
          type="button"
          class="hm-btn hm-btn--secondary"
          data-role="cancel"
          data-hm-modal-initial-focus
          onclick="closeDeleteConfirmModal()"
          data-i18n="calendar.modal.buttons.cancel"
        >
          Annulla
        </button>
        <button
          type="button"
          class="hm-btn hm-btn--danger"
          data-role="confirm"
          onclick="confirmDeleteEntry()"
          data-i18n="calendar.modal.buttons.delete"
        >
          Elimina
        </button>
      </div>
    </div>
  </div>

  <div id="calendar-toast-container" class="calendar-toast-container" aria-live="polite" aria-atomic="true"></div>

  <script src="../utils/js/calendar-header.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js" defer></script>
<script src="../utils/js/i18n.js" defer></script>
  <script src="../utils/js/modal.js" defer></script>
  <script src="../utils/js/overlay.js" defer></script>
  <script src="../utils/js/toast.js" defer></script>
  <script src="../utils/js/footer.js" defer></script>
  <script src="../utils/js/toast.js" defer></script>
  <script src="script.js" defer></script>
  <script src="../utils/js/calendar-permissions.js" defer></script>
  <script src="kalender.js" defer></script>
</body>
</html>
